using io

fn custom-linux-write ptr int (
	swap
	extern int ptr (
		mov rax, SYS_WRITE
		mov rdi, STDOUT
		pop rsi
		pop rdx
		syscall
	)
)

fn return-13 -> int (
  extern -> int (
		mov rax, 13
		push rax
  )
)

fn main (
  "Printing this text with extern\n" dup strlen custom-linux-write
	return-13 println
)
